### 02. OS (Operating System) 개요

### OS의 정의
OS는 소프트웨어(SW)의 일종이며, 하드웨어(HW)인 컴퓨터의 물리적 자원을 관리하는 '자원 관리자'이다.
OS는 프로세서(CPU), 메모리, 디스크 등의 물리적 자원을 SW적으로 struct로 정의하여 각각 Process, Virtual Memory, File System과 같은 가상화된 자원을 생성한다. 
사용자는 OS가 제공하는 시스템 콜(System Call)을 통해 간접적으로 커널(Kernel)의 기능을 이용하며, 직접 커널 함수를 호출하지 않는다.

### os의 역할
1. **사용자 편의 제공**
    - 복잡한 하드웨어의 세부 동작을 사용자에게 숨기고(가상화), 간단하고 이해하기 쉬운 인터페이스를 제공(추상화)하여 사용자가 프로그램을 쉽게 실행할 수 있도록 돕는다.

2. **자원 관리 및 효율성 보장**
    - 가상화된 자원을 여러 프로그램이 동시에 효율적으로 공유하여 사용할 수 있도록 자원 할당과 스케줄링을 관리한다.

3. **시스템 신뢰성 및 안정성 유지**
    - 여러 프로세스가 동시에 동작할 때 한 프로세스에서 문제가 발생하더라도 시스템 전체에 영향을 주지 않도록 격리 및 보호를 수행한다.

###  자원 가상화

#### 추상화 vs 가상화
- **추상화**: 복잡한 HW를 사용자가 쉽게 이해할 수 있도록 SW적으로 표현하는 것
    - CPU → Process
    - Memory → Virtual Memory

- **가상화**: 실제 하드웨어의 생김새나 동작 방식을 사용자에게 숨기고 가상의 환경을 제공하여 착각하게 만드는 것
    - CPU → 여러 개의 CPU가 동시에 존재하는 것처럼 보이게 함 (시분할 방식의 Context Switch)
    - Memory → 각 프로그램이 독립적인 메모리 공간을 가진 것처럼 보이게 함 (Virtual Memory)

#### CPU 가상화 (Context Switch)
- **문맥 교환(Context Switch)**: 
CPU가 프로세스 간 전환을 매우 빠른 속도로(약 10ms 단위) 수행하여 마치 동시에 여러 프로세스가 실행되는 것처럼 보이게 한다. 이를 통해 멀티태스킹(Multi-tasking)을 구현한다.
- 문맥 교환이 발생하는 주요 시점:
    - 시간 할당량(TQ)이 다 소모됐을 때
    - 프로세스가 실행을 마치고 종료(exit)될 때
    - 프로세스가 디스크 입출력(DISK I/O) 등의 작업으로 인해 대기 상태가 될 때

#### Memory 가상화
- **가상 메모리(Virtual Memory)**:여러 프로세스가 실제로는 물리 메모리를 공유하지만, 각 프로세스가 독립된 메모리 공간을 가진 것처럼 동작하게 만드는 기술이다. OS가 가상 메모리 주소와 물리 메모리 주소를 관리 및 매핑한다.
- 최근 CPU는 메모리 매핑 작업을 하드웨어적으로 처리하는 MMU(Memory Management Unit)를 내장하여 OS의 성능을 향상시킨다.
- 가상 메모리는 실제 물리 메모리와 디스크의 스왑 영역(SWAP)을 함께 사용하여 구현한다.

### 병행성(Concurrency)
- 여러 프로세스가 동시에 실행될 때, 작업들이 항상 원자적(atomic)으로 수행되는 것은 아니다. 따라서 동일한 조건에서도 프로세스 실행 결과가 매번 일치하지 않을 수 있다.
- 예를 들어, 카운터를 증가시키는 연산이 원자적으로 수행되지 않으면, 프로세스 전환 시 결과가 매번 다를 수 있다. 
이를 방지하기 위해 원자적 작업(Atomic Operation)을 보장하는 동기화 기법이 필요하다.

#### OS 설계 목표
- **병행성**: 동시에 여러 프로세스가 실행될 때 자원 경합으로 인한 문제를 최소화
- **영속성**: 데이터가 손실되지 않고 안정적으로 디스크에 저장 및 보관
- **안전성**: 특정 프로세스의 오류가 전체 시스템이나 다른 프로세스에 영향을 주지 않도록 보호